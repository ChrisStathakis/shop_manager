from django.shortcuts import render, reversefrom django.views.generic import ListView, CreateView, UpdateViewfrom django.utils.decorators import method_decoratorfrom django.contrib.admin.views.decorators import staff_member_requiredfrom django_tables2 import RequestConfigfrom django.contrib import messagesfrom .forms import VoucherFormfrom .models import Voucherfrom .tables import VoucherTable@method_decorator(staff_member_required, name='dispatch')class VoucherListView(ListView):    model = Voucher    template_name = 'dashboard/list_page.html'    paginate_by = 30    def get_context_data(self, **kwargs):        context = super(VoucherListView, self).get_context_data(**kwargs)        page_title, back_url, create_url = 'Κουπόνια', reverse('point_of_sale:home'), ''        queryset_table = VoucherTable(self.object_list)        RequestConfig(self.request).configure(queryset_table)        #  filters        active_filter, date_filter = [True] *2        context.update(locals())        return context@method_decorator(staff_member_required, name='dispatch')class VoucherCreateView(CreateView):    form_class = VoucherForm    model = Voucher    template_name = 'dashboard/form.html'    def get_context_data(self, **kwargs):        context = super(VoucherCreateView, self).get_context_data(**kwargs)        form_title, back_url = 'Δημιουργία Νέου Κουπονιού', reverse('vouchers:voucher_list')        context.update(locals())        return context    def form_valid(self, form):        form.save()        messages.success(self.request, 'Το κουπόνι δημιουργήθηκε!')        return super().form_valid(form)